<!-- roller.html -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Roller Game</title>
</head>
<body>
    <h1>Welcome to the Roller Game</h1>
    <div id="points">Apple Points: 10</div>
    <button id="roll-btn">Roll</button>

    <script>
        // Function to get a cookie value by name
        function getCookie(name) {
            let value = `; ${document.cookie}`;
            let parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
        }

        // Check if user is logged in (cookie exists)
        const user = getCookie("user");
        if (!user) {
            alert("You must be logged in to play!");
            window.location.href = 'login.html'; // Redirect to login if not logged in
        }

        // Initial apple points
        let applePoints = 10;
        document.getElementById('points').innerText = `Apple Points: ${applePoints}`;

        // Function to simulate rolling for apple points
        function rollForPoints() {
            // First, lose 1 apple point when the user clicks "Roll"
            if (applePoints > 0) {
                applePoints -= 1; // Deduct 1 apple point
            } else {
                alert("You don't have enough apple points to roll!");
                return; // Stop the function if the user doesn't have points left
            }

            // Now, simulate the roll to win 0, 1, or 5 points
            const roll = Math.random(); // Generates a random number between 0 and 1
            let pointsWon = 0;

            if (roll < 0.60) {
                pointsWon = 0;  // 60% chance to get 0 apple points
            } else if (roll < 0.90) {
                pointsWon = 1;  // 30% chance to get 1 apple point
            } else if (roll < 0.99) {
                pointsWon = 5;  // 10% chance to get 5 apple points
            }

            // Add the points won from the roll
            applePoints += pointsWon;

            // Update the display of apple points
            document.getElementById('points').innerText = `Apple Points: ${applePoints}`;
        }

        // Add event listener to roll button
        document.getElementById('roll-btn').addEventListener('click', rollForPoints);
    </script>
</body>
</html>

