<!-- roller.html -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Roller Game</title>
</head>
<body>
    <h1>Welcome to the Roller Game</h1>
    <div id="points">Apple Points: 10</div>
    <button id="roll-btn">Roll</button>

    <script>
        // Function to get a cookie value by name
        function getCookie(name) {
            let value = `; ${document.cookie}`;
            let parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
        }

        // Check if user is logged in (cookie exists)
        const user = getCookie("user");
        if (!user) {
            alert("You must be logged in to play!");
            window.location.href = 'login.html'; // Redirect to login if not logged in
        }

        // Initial apple points
        let applePoints = 10;
        document.getElementById('points').innerText = `Apple Points: ${applePoints}`;

        // Roll function
        function rollForPoints() {
            const roll = Math.random();

            let pointsWon = 0;
            if (roll < 0.60) pointsWon = 0;
            else if (roll < 0.90) pointsWon = 1;
            else if (roll < 0.99) pointsWon = 3;
            else pointsWon = 5;

            applePoints += pointsWon;
            document.getElementById('points').innerText = `Apple Points: ${applePoints}`;
        }

        // Add event listener to roll button
        document.getElementById('roll-btn').addEventListener('click', rollForPoints);
    </script>
</body>
</html>
