<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apple Points Casino</title>
    <style>
        /* Add your existing styles here */
        body {
            background-color: black;
            color: white;
            font-family: Arial, sans-serif;
            text-align: center;
        }
        #applePointsText {
            font-size: 2em;
            margin-top: 20px;
        }
        #rollButton {
            padding: 15px 30px;
            font-size: 1.2em;
            margin-top: 20px;
            cursor: pointer;
            background-color: red;
            border: none;
            color: white;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        #rollButton:hover {
            background-color: darkred;
        }
    </style>
</head>
<body>

    <h1>Welcome to the Apple Points Casino</h1>
    <p>Your User ID: <span id="userID">Loading...</span></p>
    <p id="applePointsText">Apple Points: 10</p>
    <button id="rollButton">Roll</button>

    <script>
        // Function to generate a random 12-character alphanumeric string
        function generateRandomID() {
            const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            let randomID = '';
            for (let i = 0; i < 12; i++) {
                const randomIndex = Math.floor(Math.random() * characters.length);
                randomID += characters[randomIndex];
            }
            return randomID;
        }

        // Function to set a cookie with a specific name and value
        function setCookie(name, value, days) {
            const date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000)); // Set expiry time for the cookie
            const expires = "expires=" + date.toUTCString();
            document.cookie = name + "=" + value + ";" + expires + ";path=/";
        }

        // Function to get a cookie value by name
        function getCookie(name) {
            const decodedCookie = decodeURIComponent(document.cookie);
            const cookieArray = decodedCookie.split(';');
            for (let i = 0; i < cookieArray.length; i++) {
                let cookie = cookieArray[i].trim();
                if (cookie.indexOf(name + "=") === 0) {
                    return cookie.substring(name.length + 1, cookie.length);
                }
            }
            return ""; // If no cookie is found, return an empty string
        }

        // Function to initialize the user ID and apple points
        function initializeUserID() {
            let userID = getCookie("userID");
            let applePoints = getCookie("applePoints");

            if (!userID) {
                // If no userID cookie exists, generate a new one
                userID = generateRandomID();
                setCookie("userID", userID, 365); // Cookie lasts for 365 days
            }

            // If no applePoints cookie exists, initialize with 10 points
            if (!applePoints) {
                applePoints = 10;
                setCookie("applePoints", applePoints, 365); // Cookie lasts for 365 days
            }

            // Display user ID and apple points on the page
            document.getElementById("userID").textContent = userID;
            document.getElementById("applePointsText").textContent = `Apple Points: ${applePoints}`;
        }

        // Function to update the points after a roll
        function updatePoints(points) {
            let applePoints = getCookie("applePoints");
            applePoints = parseInt(applePoints) + points;

            // Update the points in the cookie and on the page
            setCookie("applePoints", applePoints, 365);
            document.getElementById("applePointsText").textContent = `Apple Points: ${applePoints}`;
        }

        // Handle the roll button click event
        document.getElementById("rollButton").addEventListener("click", function() {
            let applePoints = getCookie("applePoints");
            applePoints = parseInt(applePoints);
            
            // If the user doesn't have enough points
            if (applePoints <= 0) {
                alert("You don't have enough Apple Points to roll!");
                return;
            }

            // Deduct one point for the roll
            updatePoints(-1);

            // Simulate the roll (60% chance for 0 points, 30% for 1, 10% for 3, and 1% for 5)
            const rollResult = rollDice();
            
            // Simulate a delay of 4 seconds before showing the result
            setTimeout(function() {
                updatePoints(rollResult);
            }, 4000);  // 4 seconds for the "roll" sound
        });

        // Function to simulate a dice roll and return the result (0, 1, 3, or 5 points)
        function rollDice() {
            const random = Math.random();
            if (random < 0.6) return 0; // 60% chance to get 0 points
            else if (random < 0.9) return 1; // 30% chance to get 1 point
            else if (random < 0.99) return 3; // 10% chance to get 3 points
            else return 5; // 1% chance to get 5 points
        }

        // Initialize the user data on page load
        window.onload = initializeUserID;

    </script>
</body>
</html>
